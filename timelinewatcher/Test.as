package {		import flash.display.MovieClip;	import flash.text.TextField;		import com.refunk.events.TimelineEvent;	import com.refunk.timeline.TimelineWatcher;		public class Test extends MovieClip {				public var ball:MovieClip;				private static const MOVE_LEFT:String = "moveLeft";		private static const MOVE_RIGHT:String = "moveRight";				private var timelineWatcher:TimelineWatcher;		private var output:TextField;		private var loops:uint = 1;				public function Test() {			super();			stop();			output = new TextField();			addChild(output);			timelineWatcher = new TimelineWatcher(this);			timelineWatcher.addEventListener(TimelineEvent.LABEL_REACHED, handleTimelineEvent);			timelineWatcher.addEventListener(TimelineEvent.END_REACHED, handleTimelineEvent);			gotoAndPlay(1);		}		private function handleTimelineEvent(e:TimelineEvent):void {			switch (e.type) {				case TimelineEvent.LABEL_REACHED:					if (e.currentLabel === MOVE_LEFT || e.currentLabel === MOVE_RIGHT) {						output.text = "label: " + e.currentLabel + "\nloops: " + loops;					}					break;								case TimelineEvent.END_REACHED:					loops++;					if (loops > 3) {						stop();						timelineWatcher.removeEventListener(TimelineEvent.LABEL_REACHED, handleTimelineEvent);						timelineWatcher.removeEventListener(TimelineEvent.END_REACHED, handleTimelineEvent);						timelineWatcher.dispose();						timelineWatcher = null;					}					break;			}		}	}}